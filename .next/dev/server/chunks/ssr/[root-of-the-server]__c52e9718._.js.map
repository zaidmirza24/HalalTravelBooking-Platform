{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///c:/Users/mirza/OneDrive/Desktop/Projects/Halaltravelbookingplatform/contexts/AuthContext.tsx"],"sourcesContent":["'use client';\n\nimport React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';\n\nexport interface User {\n  id: string;\n  name: string;\n  email: string;\n  role: 'user' | 'vendor' | 'vendor_staff' | 'admin' | 'superadmin';\n  avatar?: string;\n  vendorId?: string; // Links vendor users to their business\n}\n\ninterface AuthContextType {\n  user: User | null;\n  isAuthenticated: boolean;\n  isAdmin: boolean;\n  isVendor: boolean;\n  loading: boolean;\n  login: (email: string, password: string) => Promise<void>;\n  logout: () => void;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const [user, setUser] = useState<User | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  // Check for existing session on mount\n  useEffect(() => {\n    const storedUser = localStorage.getItem('auth_user');\n    const storedToken = localStorage.getItem('auth_token');\n\n    if (storedUser && storedToken) {\n      try {\n        setUser(JSON.parse(storedUser));\n      } catch (error) {\n        console.error('Failed to parse stored user:', error);\n        localStorage.removeItem('auth_user');\n        localStorage.removeItem('auth_token');\n      }\n    }\n    setLoading(false);\n  }, []);\n\n  const login = async (email: string, password: string) => {\n    // TODO: Replace with actual API call\n    // Mock authentication for development\n\n    // Simulate API delay\n    await new Promise(resolve => setTimeout(resolve, 1000));\n\n    // Mock admin user\n    if (email === 'admin@halaltravel.com') {\n      const mockAdmin: User = {\n        id: 'admin-1',\n        name: 'Admin User',\n        email: email,\n        role: 'admin',\n        avatar: undefined,\n      };\n\n      localStorage.setItem('auth_token', 'mock-admin-token');\n      localStorage.setItem('auth_user', JSON.stringify(mockAdmin));\n      setUser(mockAdmin);\n    }\n    // Mock superadmin user\n    else if (email === 'superadmin@halaltravel.com') {\n      const mockSuperAdmin: User = {\n        id: 'superadmin-1',\n        name: 'Super Admin',\n        email: email,\n        role: 'superadmin',\n        avatar: undefined,\n      };\n\n      localStorage.setItem('auth_token', 'mock-superadmin-token');\n      localStorage.setItem('auth_user', JSON.stringify(mockSuperAdmin));\n      setUser(mockSuperAdmin);\n    }\n    // Mock vendor user\n    else if (email === 'vendor@halaltravel.com') {\n      const mockVendor: User = {\n        id: 'vendor-1',\n        name: 'Hotel Owner',\n        email: email,\n        role: 'vendor',\n        vendorId: 'VND001',\n        avatar: undefined,\n      };\n\n      localStorage.setItem('auth_token', 'mock-vendor-token');\n      localStorage.setItem('auth_user', JSON.stringify(mockVendor));\n      setUser(mockVendor);\n    }\n    // Mock regular user\n    else {\n      const mockUser: User = {\n        id: 'user-1',\n        name: 'Regular User',\n        email: email,\n        role: 'user',\n        avatar: undefined,\n      };\n\n      localStorage.setItem('auth_token', 'mock-user-token');\n      localStorage.setItem('auth_user', JSON.stringify(mockUser));\n      setUser(mockUser);\n    }\n  };\n\n  const logout = () => {\n    localStorage.removeItem('auth_token');\n    localStorage.removeItem('auth_user');\n    setUser(null);\n  };\n\n  const value: AuthContextType = {\n    user,\n    isAuthenticated: !!user,\n    isAdmin: user?.role === 'admin' || user?.role === 'superadmin',\n    isVendor: user?.role === 'vendor' || user?.role === 'vendor_staff',\n    loading,\n    login,\n    logout,\n  };\n\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AAFA;;;AAuBA,MAAM,4BAAc,IAAA,sNAAa,EAA8B;AAExD,SAAS,aAAa,EAAE,QAAQ,EAA2B;IAChE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAc;IAC9C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,sCAAsC;IACtC,IAAA,kNAAS,EAAC;QACR,MAAM,aAAa,aAAa,OAAO,CAAC;QACxC,MAAM,cAAc,aAAa,OAAO,CAAC;QAEzC,IAAI,cAAc,aAAa;YAC7B,IAAI;gBACF,QAAQ,KAAK,KAAK,CAAC;YACrB,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,gCAAgC;gBAC9C,aAAa,UAAU,CAAC;gBACxB,aAAa,UAAU,CAAC;YAC1B;QACF;QACA,WAAW;IACb,GAAG,EAAE;IAEL,MAAM,QAAQ,OAAO,OAAe;QAClC,qCAAqC;QACrC,sCAAsC;QAEtC,qBAAqB;QACrB,MAAM,IAAI,QAAQ,CAAA,UAAW,WAAW,SAAS;QAEjD,kBAAkB;QAClB,IAAI,UAAU,yBAAyB;YACrC,MAAM,YAAkB;gBACtB,IAAI;gBACJ,MAAM;gBACN,OAAO;gBACP,MAAM;gBACN,QAAQ;YACV;YAEA,aAAa,OAAO,CAAC,cAAc;YACnC,aAAa,OAAO,CAAC,aAAa,KAAK,SAAS,CAAC;YACjD,QAAQ;QACV,OAEK,IAAI,UAAU,8BAA8B;YAC/C,MAAM,iBAAuB;gBAC3B,IAAI;gBACJ,MAAM;gBACN,OAAO;gBACP,MAAM;gBACN,QAAQ;YACV;YAEA,aAAa,OAAO,CAAC,cAAc;YACnC,aAAa,OAAO,CAAC,aAAa,KAAK,SAAS,CAAC;YACjD,QAAQ;QACV,OAEK,IAAI,UAAU,0BAA0B;YAC3C,MAAM,aAAmB;gBACvB,IAAI;gBACJ,MAAM;gBACN,OAAO;gBACP,MAAM;gBACN,UAAU;gBACV,QAAQ;YACV;YAEA,aAAa,OAAO,CAAC,cAAc;YACnC,aAAa,OAAO,CAAC,aAAa,KAAK,SAAS,CAAC;YACjD,QAAQ;QACV,OAEK;YACH,MAAM,WAAiB;gBACrB,IAAI;gBACJ,MAAM;gBACN,OAAO;gBACP,MAAM;gBACN,QAAQ;YACV;YAEA,aAAa,OAAO,CAAC,cAAc;YACnC,aAAa,OAAO,CAAC,aAAa,KAAK,SAAS,CAAC;YACjD,QAAQ;QACV;IACF;IAEA,MAAM,SAAS;QACb,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,QAAQ;IACV;IAEA,MAAM,QAAyB;QAC7B;QACA,iBAAiB,CAAC,CAAC;QACnB,SAAS,MAAM,SAAS,WAAW,MAAM,SAAS;QAClD,UAAU,MAAM,SAAS,YAAY,MAAM,SAAS;QACpD;QACA;QACA;IACF;IAEA,qBAAO,8OAAC,YAAY,QAAQ;QAAC,OAAO;kBAAQ;;;;;;AAC9C;AAEO,SAAS;IACd,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT"}},
    {"offset": {"line": 127, "column": 0}, "map": {"version":3,"sources":["file:///c:/Users/mirza/OneDrive/Desktop/Projects/Halaltravelbookingplatform/app/providers.tsx"],"sourcesContent":["'use client';\n\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport { ReactQueryDevtools } from '@tanstack/react-query-devtools';\nimport { AuthProvider } from '@/contexts/AuthContext';\nimport { ThemeProvider } from 'next-themes';\nimport { useState } from 'react';\n\nexport function Providers({ children }: { children: React.ReactNode }) {\n  const [queryClient] = useState(\n    () =>\n      new QueryClient({\n        defaultOptions: {\n          queries: {\n            staleTime: 5 * 60 * 1000, // 5 minutes\n            gcTime: 10 * 60 * 1000, // 10 minutes (formerly cacheTime)\n            retry: 2,\n            refetchOnWindowFocus: false,\n          },\n        },\n      })\n  );\n\n  return (\n    <QueryClientProvider client={queryClient}>\n      <ThemeProvider attribute=\"class\" defaultTheme=\"light\" enableSystem={false}>\n        <AuthProvider>\n          {children}\n          <ReactQueryDevtools initialIsOpen={false} />\n        </AuthProvider>\n      </ThemeProvider>\n    </QueryClientProvider>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;AACA;AACA;AACA;AANA;;;;;;;AAQO,SAAS,UAAU,EAAE,QAAQ,EAAiC;IACnE,MAAM,CAAC,YAAY,GAAG,IAAA,iNAAQ,EAC5B,IACE,IAAI,4LAAW,CAAC;YACd,gBAAgB;gBACd,SAAS;oBACP,WAAW,IAAI,KAAK;oBACpB,QAAQ,KAAK,KAAK;oBAClB,OAAO;oBACP,sBAAsB;gBACxB;YACF;QACF;IAGJ,qBACE,8OAAC,6MAAmB;QAAC,QAAQ;kBAC3B,cAAA,8OAAC,iKAAa;YAAC,WAAU;YAAQ,cAAa;YAAQ,cAAc;sBAClE,cAAA,8OAAC,wIAAY;;oBACV;kCACD,8OAAC,0MAAkB;wBAAC,eAAe;;;;;;;;;;;;;;;;;;;;;;AAK7C"}}]
}